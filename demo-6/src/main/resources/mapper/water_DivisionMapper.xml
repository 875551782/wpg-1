<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.wpg.dao.Water_DivisionDao">

	<select id="getWater_DivisionByRegion" resultType="com.wpg.pojo.Water_Division">
		select * from water_division where region=#{0} 	
	</select>
	
	<select id="getOrder_WaterByWId" resultType="com.wpg.pojo.Order_Water">
		select oid from order_water where wid=#{0}
	</select>
	
	<select id="getPicByWid" resultType="com.wpg.pojo.Pic">
		select * from pic where wid=#{0}
	</select>
	
	<select id="getOrder_WaterInfos" resultMap="Order_WaterInfo">
		select * from water_division  where region=#{0}
	</select>
	
	<select id="getOrder_HardwaresByWId" resultMap="order_HareWareInf">
		select * from order_hardware where order_id 
		in (select oid from order_water where wid=#{0})
	</select>
	
	<resultMap type="com.wpg.bean.Order_WaterInfo" id="Order_WaterInfo">
		<id column="wid" property="wId"></id>
		<result column="wname" property="wName"></result>
		<result column="region" property="region"></result>
		<result column="num" property="num"/>
		<association property="pic" select="getPicByWid" column="wid" >
			<result column="pid" property="pId"></result>
			<result column="pname" property="pName"></result>
			<result column="ptel" property="pTel"></result>
		</association>
		<collection property="order_Hardwares"
		ofType="com.wpg.pojo.Order_Hardware" column="wid" 
		select="getOrder_HardwaresByWId" >
			
			<result column="order_id" property="order_Id"></result>
			<result column="hardware_id" property="hardware_id"></result>
			<association  column="hardware_id" property="hardware_Group" select="com.wpg.dao.HardwareDao.selHardwareById">
		</association> 
		</collection>
	</resultMap>
	
	<resultMap type="com.wpg.pojo.Order_Hardware" id="order_HareWareInf" >
			<id column="wid"/>
			<id column="order_id" property="order_Id"></id>
			<result column="hardware_id" property="hardware_id"></result>
			<association  column="hardware_id" property="hardware_Group" select="com.wpg.dao.HardwareDao.selHardwareById">
			</association>
	</resultMap>
</mapper>